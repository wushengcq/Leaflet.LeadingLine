<html>
<head>
	<title>Leaflet.js Animated Sector Test 1</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!--
	<meta HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
	<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache"> 
	<meta HTTP-EQUIV="Expires" CONTENT="0"> 
	-->
	<!-- import Leaflet -->
    <link rel="stylesheet" 
		href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" 
		integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" 
		crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" 
		integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" 
		crossorigin=""></script>

	<script src="../src/LeadingLine.js"></script>
<head>
<body onload="loadMap()">
	<div id="map" style="width:800px;height:400px;background-color:#ffffff;"></div>
	<br>
	<div style='line-height:40px;'>
		<button onclick="addPolyline()">addPolyline</button>
		<button onclick="addPatternline()">addPatternline</button>
	</div>
	<script>
	var _map = null;

	function loadMap() {
		_map = L.map('map', {
			center: [30.557156, 110.577026],
	        zoom:5,
	        minZoom: 0,
	        maxZoom: 21,
	        markerZoomAnimation: false,
	        closePopupOnClick: false,
	        maxBounds: [[-90, -180],[90, 180]],
	        renderer: L.canvas()
		});

		L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png', {
		    attribution: 'cartodb-basemaps',
	        subdomains: 'abcd',
			maxZoom: 19
		}).addTo(_map);

    }

	function addPolyline() {
        var latlngs = [
            [30.661057, 104.081757], 
            [29.558176, 106.510338], 
            [28.200825, 112.98127],
            [30.567514, 114.291939], 
            [31.863255, 117.275703], 
            [31.106981, 121.37156] 
        ];
        var polyline = L.polyline(latlngs, {
            color: '#00ff00',
            weight: 2,
            opacity: 0.8,
        }).addTo(_map);
        //_map.fitBounds(polyline.getBounds());
    }

	function addPatternline() {
        var latlngs = [
            [30.661057, 104.081757], 
            [29.558176, 106.510338], 
            [28.200825, 112.98127],
            [30.567514, 114.291939], 
            [31.863255, 117.275703], 
            [31.106981, 121.37156] 
        ];

		var lnglats = [[106.06754570247227,29.000003871281706],[106.06725741579714,28.99918262477837],[106.0664886285474,28.997369201227684],[106.06549133435766,28.99535505798957],[106.06477053313364,28.994135931627966],[106.06378740326613,28.992755294221524],[106.06299174337431,28.9917313971863],[106.06204151970041,28.990591602720315],[106.0605573199644,28.98866218011557],[106.05997654498162,28.987845035420094],[106.05866134584448,28.98584834532494],[106.05690092383861,28.98305050497686],[106.05583022698346,28.981399677053503],[106.05505595117125,28.980437660569635],[106.05437764561191,28.979744275178234],[106.05371177767648,28.97918698419204],[106.05307935642719,28.978749522472526],[106.05209165260771,28.978184912803556],[106.05066594477756,28.97759305727385],[106.04943492398263,28.97727047675113],[106.04881036460671,28.977148717539308],[106.04786973220246,28.977054644856025],[106.04613882684544,28.977028553724836],[106.0436842748095,28.97708864012867],[106.04164780050564,28.977095081972493],[106.04096373478859,28.977111789577464],[106.04067819284438,28.977103283789575],[106.04042491317927,28.977074851723103],[106.03978490165196,28.97700528016958]];

		lnglats = [[106.033452259814,28.97463040536894],[106.03294478497389,28.974233711716465],[106.03237661668754,28.973705666683202],[106.03180214415369,28.973117572118326],[106.0312472264784,28.972401787312663],[106.0307654389739,28.971726498079477],[106.03010851749417,28.970608086793845],[106.02973266383145,28.969996508232327],[106.02910800463076,28.969156963223327],[106.02854861282827,28.9685779167375],[106.02778118265553,28.967978300058576],[106.02700771983046,28.967540737615025],[106.02667080411436,28.9673785826555],[106.0260247608341,28.967096770199817],[106.02521629099908,28.966853894791484],[106.02443706801631,28.96669939935782],[106.02367749881756,28.96659838031104],[106.02271958324224,28.966485195235634],[106.02185553800274,28.966370553258457],[106.02110684700347,28.96623689961325],[106.02031857594159,28.96604319553711],[106.01958405016387,28.965782495565747],[106.01897026826333,28.965502240735873],[106.01843619147712,28.965202331222656],[106.01752114478506,28.964548325344992],[106.01687445759023,28.963913702555374],[106.01632045452544,28.96318676795505],[106.01590685002117,28.962412762838767],[106.01535915030462,28.96075353075088],[106.01482991906556,28.958477974379093],[106.0148259881289,28.95844781381561]];
		//console.log(lnglats);
		var tmp;
		for(var i=0; i<lnglats.length; i++) {
			tmp = lnglats[i][1];
			lnglats[i][1] = lnglats[i][0];
			lnglats[i][0] = tmp;
		}

		latlngs = lnglats;
		
		var leadingLine = L.leadingLine(latlngs, {
            color: '#00ff00',
            weight: 20,
			borderSize: 1,
			borderColor: '#eeeeee',
			signColor: '#333333',
            opacity: 0.8,
        }).addTo(_map);

		_map.fitBounds(leadingLine.getBounds());
    }
	
	window.setTimeout(function(){
		addPatternline();
	}, 500);	

    </script>
</body>
</html>
